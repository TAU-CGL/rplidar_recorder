<h2>Contraption Calibration</h2>
<p>
    The contraptions are placed wherever. The calibration process helps us to determine the offset (rigid body) transformation between each pair.
    The process is as follows:
    <ol>
        <li>We place a circular shape in a location visible by all contraptions.</li>
        <li>We take a snapshot, and for each contraption find the position (x1_i, y1_i) of the circle center.</li>
        <li>
            Place the circular shape at some other location that is also visible by all contraptions<br>
            and redo the previous step to get the positions (x2_i, y2_i) of the circle center.
        </li>
        <li>For each contraption pair (i,j) find the best tranform T_ij that maps (x1_i,y1_i) to (x1_j, y1_j) and (x2_i,y2_i) to (x2_j, y2_j).</li>
    </ol>
</p>

<h3>Fit Circles</h3>

<div class="form-inline">
    <label for="radius">Radius:</label>
    <input type="number" id="radius" name="radius" value="0.15" step="0.01" min="0.01">
    <label for="alternativeRadius">Alternative Radius:</label>
    <input type="number" id="alternativeRadius" name="alternativeRadius" value="0.145" step="0.01" min="0.01">
    
    <label for="useAlternativeRadius">Use Alternative Radius:</label>
    <span id="contraption-checkboxes">
    </span>
</div>

<div class="contraption-container">
    <div class="contraption">
        <h4>Circle #1</h4>
        <button class="fit-button" data-contraption="1" onclick="fit_circles_with_ui(1)">Fit</button>
        <textarea id="text1" rows="10" cols="50"></textarea>
        <button class="visualize-button" data-contraption="1" onclick="visualize_fit_circles(1)">Visualize</button>
    </div>

    <div class="contraption">
        <h4>Circle #2</h4>
        <button class="fit-button" data-contraption="2" onclick="fit_circles_with_ui(2)">Fit</button>
        <textarea id="text2" rows="10" cols="50"></textarea>
        <button class="visualize-button" data-contraption="2" onclick="visualize_fit_circles(2)">Visualize</button>
    </div>
</div>

<br>

<h3>Calibrate Contraptions</h3>

<div>
    <span>
        <button class="calibrate-button" onclick="calibrate()">Calibrate</button>
        <button class="visualize-calibrate-button" onclick="visualize_calibration()">Visualize Calibration</button>
    </span>
    <textarea id="calibration-text" rows="5" cols="50"></textarea><br>
</div>

<script src="/static/js/calibration.js"></script>